info:
  title: Q-Hive
  description: REST API's by Q-Hive
  contact:
    - name: chrortegita@gmail.com
    - name: luismtzesq@gmail.com
  version: '1.0'
servers:
  - url: 'https://localhost:9999/'
  #TODO: Add server URL's from the deployed 
tags:
  - name:         Admin Actions
    description:  Endpoint for all Admin posible interactions
paths:
  /api/v1/employee:
    post:
      tags:
        - Container operations
        - Container data update
      summary:  Update data for the specificied employee
      desc:     Route for updating specific employee's data
      operationId: POST-update-employee-data-with-id
      payload: # * All fields are optional
        name:       string 
        lname:      string
        phone:      string
        image:      URL string
        containers: [ ObjectId ]
        address:
          $ref: '#/components/schemas/db-objects/address-schema'
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/POST-update-employee-data-with-id'
        401:
          description: Unauthorized
          cohtent: {}
        403:
          description: Forbidden
          cohtent: {}
        404:
          description: Not Found
          cohtent: {}
      deprecated: false
    get:

components:
  schemas:
    db-objects:
      address-schema:
        title: Address schema
        type:  object
        properties:
          stNumber:
            type: string
            required: true
          street:
            type: string
            required: true
          zip:
            type: string
            required: true
          city:
            type: string
            required: true
          state:
            type: string
            required: true
          country:
            type: string
            required: true
          references:
            type: string
            required: false
          coords:
            type: object
            required: false
            properties:
              latitude:
                type: number
                required: true
              longitude:
                type: number
                required: true
      client-schema:
        title: Client's data schema
        type:  object
        properties:
          uid:
            type:     string
            required: true
          email:
            type:     string 
            required: true
          passphrase:   
            type:     ObjectId
            required: true
          organization:   
            type:     ObjectId
            required: true
          name:
            type:     string
            required: true
          lname:
            type:     string 
            required: true
          phone:
            type:     string 
            required: true
          image:
            type:     string 
            required: true
          businessName:
            type:     string 
            required: true
          socialInsurance:
            type:     string 
            required: true
          bankAccount:
            type:     string 
            required: true
          address:
            $ref: '#/components/schemas/db-objects/address-schema'
            required: true
      organization-schema:
        title: Organization's data schema
        type:  object
        properties:
          name:
            type:     string
            required: true
          owner:
            type:     ObjectId
            required: true
          employees:
            type: array
            items: 
              $ref: '#/components/schemas/db-objects/container-schema'
            required: true
            default: [] 
          containers:
            type: array
            items: 
              $ref: '#/components/schemas/container-schema'
            required: true
            default: []  
          customers:  
            type: array
            items: 
              $ref: '#/components/schemas/customer-schema' 
          providers:
            type: array
            items: 
              $ref: '#/components/schemas/provider-schema'
            required: true
            default: []  
          orders:
            type: array
            items: 
              $ref: '#/components/schemas/order-schema'
            required: true
            default: [] 
          address:
            $ref: '#/components/schemas/db-objects/address-schema'
      passphrase-schema:
        title: Passphrase's data schema
        type:  object
        properties:
          client:
            type: ObjectId
            required: true 
            unique: true
          uid:
            type: string
            required: true
            unique: true
          passphrase:
            type: string
            required: true
          organization:
            type: ObjectId
            required: true
      employee-schema:
        title: Employee's data schema
        type:  object
        properties:
          uid:     
            type: string,     
            required: true 
          email:   
            type: string,     
            required: true 
          name:    
            type: string,     
            required: true 
          lname:   
            type: string,     
            required: false 
          phone:   
            type: string,     
            required: true 
          image:   
            type: string,     
            required: true 
          salary:  
            type: Number,     
            required: true    
          address: 
            type: Address,    
            required: true 
      container-schema:
        title: Container's data schema
        type:  object
        properties:
          name:      
            type: String
            required: false
            unique: false
          capacity:  
            type:     number
            required: true                
          available: 
            type:     number
            required: true
          employees: 
            type:     array
            items:    ObjectId
            required: true                
          production:
            type:     array
            items:    
              $ref:   '#/components/schemas/production-schema'
            required: true                
          products:  
            type:     array
            items: 
              $ref:   '#/components/schemas/product-schema'
            required: true                
          address:   
            $ref:     '#/components/schemas/db-objects/address-schema'
            required: false               
      customer-schema:
        title: Customer's data schema
        type:  object
        properties:
      provider-schema:
        title: Provider's data schema
        type:  object
        properties:
          email: 
            type:     string 
            required: true
          name:  
            type:     string 
            required: true
          seeds: 
            type: array
            items:
              $ref: '#/components/schemas/seed-schema' 
            required: true
      order-schema:
        title: Order's data schema
        type:  object
        properties:
          organization: 
            type: ObjectId,   
            required: true
          customer: 
            type: ObjectId,   
            required: true
          type: # * REPETEAD ORDERS HAVE A START AND END DATE
            type: string,     
            required: true
          price: 
            type: number
            required: true
          date: 
            type: date      
            required: true
          end: 
            type: date       
            required: true
          products:   
              type: array
              items: 
                _id:
                  type:     ObjectId
                  required: true
                name:
                  type:     string
                  required: true
                packages:
                  type: array
                  items:
                    size:   string,
                    number: number,
                    grams:  number
                  required: true
                status:
                  type:     string
                  required: true
                seedId:
                  type:     string
                  required: false
              required: true
          productionData:
            type:   array
            items:
              product:    string,
              seeds:      number,
              harvest:    number,
              trays:      number
          required: true
          status:
            type:     string
            required: true
      product-schema:
        title: Product's data schema
        type:  object
        properties:
          name:
            type:     string
            required: true
          image: # * BASE 64 PARSED PHOTO
            type:     string
            required: false
          desc:
            type:     string
            required: false
          status:
            type:     string
            required: true
            default:  'on hold'
          # * ID of quality of the seeds - track the seeds origin - metadata 
          seed:
            type: ObjectId
            required: false 
          provider:
            type: ObjectId
            required: false
          price: # * Cost per package 
            type: array
            items:
              amount:       # * Package price
                type:     number
                required: true 
              packageSize:  # * PACKAGE SIZE IN GRAMS
                type:     number
                required: true
            required: true  
          mix:
            type: object
            properties:
              isMix:  
                type:     boolean
                required: true
              products:
                type: array
                items:
                  strain: # * Reference to seed object
                    type:     ObjectId 
                    required: true 
                  amount: # * Measured in trays
                    type:     number   
                    required: true 
                required: false 
            required: false
          parameters:
            type: object
            properties:
              day: # * In days check email
                type: number
                required: true 
              night: # * In days check email
                type: number
                required: true 
              seedingRate: # * Per tray
                type: number
                required: true 
              harvestRate: # * Per tray
                type: number
                required: true 
            required:   false
      production-schema:
        title: Production's data schema
        type:  object
        properties:
          end:
            type:     date
            required: true
            default:  data within 2 weeks,
          orders:
            type:     array
            items:    ObjectId
            required: true
            default:  []
          tasks:
            type:     array
            items:
              $ref:   '#/components/schemas/task-schema'
            required: true
          completed:
            type:     array
            items:    ObjectId
            default:  []
          products: 
            type: array
            items: 
              _id:
                type:     ObjectId
                required: true
              name:
                type:     string  
                required: true
              amount: # * Measured in packages
                type:     number   
                required: true 
              surplus: # * In tray numbers,used to manage 10% of unperiodic orders
                type:     number   
                required: true 
              seed:
                type:     number   
                required: true
            required: true
      seed-schema:
        title: Seed's data schema
        type:  object
        properties:
          seedId:   # * User fed
            type:     string
            required: true 
          seedName: # * Name provided by provider xd
            type:     string   
            required: true 
          product:
            type:     ObjectId 
            required: true
          batch:
            type:     string   
            required: false
      task-schema:
        title: Task's data schema
        type:  object
        properties:
          assigned:
            type:     array
            items:    ObjectId
            required: true
            default:  []   
          currentStep:
            type:     number
            required: true
            default:  0    
          completed:
            type:     boolean
            required: true
            default:  false
          # * IN CASE OF PRODUCTION TASKS
          orders:
            type:     array
            items:    ObjectId
            required: false
          details:
            type:     ObjectId
            required: false
          # * IN CASE OF PRODUCTION TASKS
          product:
            type: array
            items: ObjectId 
            required: false
          steps:
            type: array
            items:
              $ref: '#/components/schemas/step-schema'     
            required: true
      step-schema:
        type: object
        properties:
          step:
            type:     number    
            required: true
          assigned:
            type:     array
            items:    ObjectId
            required: true
            default:  []
          status:
            type:     string,    
            required: true
            default: "To-do"
          estimated: # * Measured in hours
            type:     number,    
            required: true
            default:  0
    